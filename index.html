<!DOCTYPE html>
<html>
<head>
  <title>Panel de Finanzas</title>
  <meta charset="UTF-8">
  <!-- Firebase compat -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
</head>

<body>
  <h2 id="titulo">Iniciar sesi칩n para acceder a tu panel</h2>

  <!-- Botones -->
  <button id="loginBtn" onclick="login()">Iniciar sesi칩n con Google</button>
  <button id="finanzasBtn" style="display:none;" onclick="window.location.href='finanzas.html'">
    Ir a Finanzas
  </button>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCxCWZRHoEvayokHNkoavBaa8_o7vr1SiE",
      authDomain: "drg-app-a654e.firebaseapp.com",
      projectId: "drg-app-a654e",
      storageBucket: "drg-app-a654e.appspot.com",
      messagingSenderId: "853577402845",
      appId: "1:853577402845:web:9c7ae221db8bf986cc0e34",
      measurementId: "G-PWZF6M6NKZ"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // Detectar si el usuario ya est치 autenticado
    auth.onAuthStateChanged(user => {
      if (user) {
        document.getElementById("titulo").innerText = "Bienvenido, " + user.displayName;
        document.getElementById("loginBtn").style.display = "none";
        document.getElementById("finanzasBtn").style.display = "inline-block";
      }
    });

    // Funci칩n de login
    function login() {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider)
        .then(result => {
          const user = result.user;
          document.getElementById("titulo").innerText = "Bienvenido, " + user.displayName;
          document.getElementById("loginBtn").style.display = "none";
          document.getElementById("finanzasBtn").style.display = "inline-block";
        })
        .catch(error => {
          console.error("Error en login:", error);
          alert("Fallo en login. Revisa la consola.");
        });
    }
  </script>
</body>
</html>
